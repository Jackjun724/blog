---
title: 百度云高速下载(配合Motrix)
tags: 逆向工程
---

## 伸手党
[Github](https://github.com/Jackjun724/HackPan)里面有教程，但是需要配合Motrix下载工具(IDM、Aria2等其他下载工具也可以，没有Windows就不出教程了)，线程大概10个左右就够了，多了也没用


### 前情提要
本文仅供学习参考，不得作用与非法用途，后果自负！

### 故事由来
之前被百度云恶心到了，后来花了大把时间去逆向百度云，从Web到Apk，最后结果不言而喻。百度云在下载方面的限速已经不可能通过一个账号去突破了，当日账号下载流量超过一定限制后就会被限速，百度云是P2SP的模式，
即(特指SVIP用户)刚开始的时候你的流量是P2S的，就是直接从服务器下载，多线程下载可以把带宽跑满(本人最高300M带宽下载速度30M/s+)，后来把API逆出来以后拿给别人用，几个小时后就变黑号了，就是下载速度特别慢的那种，
然后账号就发生了从P2S转变到P2P的过程，下载就会走P2P，SVIP会保持在1M/s左右，P2P根据资源热度来算，热度不高的只有几十K，而且在低版本客户端没有看到P2P的模式，都是在高版本SVIP变黑降级P2P(没有研究普通账号)，
即使是官方的客户端，一旦账号变黑，都会被限速，这就意味着无解，因为它狠起来自己都干，想要破解这种限速，只有拿海量账号去轮流申请下载链接，所以你用的市面上比较火的加速软件，有几个(不是全部，据我所知PanDownload没有，Kinh某就不多说了，大家懂得都懂吧)背后都是偷盗你的Cookie去帮别人下载，模式类似P2P。
所以谨慎使用，我在Github里开源了[百度云盘的一些算法](https://github.com/Jackjun724/disk)，基于Unidbg模拟了`rand`和`sign`算法，其他的`devuid`可以固定，但是这并不能解决加速问题，
因为百度云连自己的客户端都限制的模式，注定了百度云只有通过某些未修复的BUG或者海量账号数据库来实现加速，速度大概在`1M/s` - `7M/s` 这样，然后就放弃了逆向百度云。

### 踏破铁鞋无觅处，得来全不费功夫
在一次偶然的机会，作者要借助百度云的云播放功能看一些关于机器学习的视频([RoadMap](https://github.com/Jackjun724/ml_roadmap)在Github)，然后发现Web端十分的不清晰，客户端的用不许倍速播放，要会员，
MacOS的破解版又少，作者就去分析了APK的`原画质`播放链接，通过解析`原画质链接`来实现倍速播放，最后达到原画+倍速+多平台的功能，需要这个插件的可以在我的Github留言。

在研究这个功能的时候，意外的发现了百度云漏掉的一个Dlink接口，也就是直链接口，自从百度云封禁Web端下载大于50M的文件的时候已经没有超过50M的直链链接了，但是经过研究这个接口可以得到任何大小的直链，然后通过直链倍速下载，
但是速度只有`1M/s`这样，不过相比百度云`100Kb`已经是很好了，这个本身用来解析视频的链接强制传文件目录会返回`400`状态码，但是还是会把直链返回回来，这就给了我们可乘之机，这个接口我直接做成了油猴脚本，上传在了油猴上。
可以去Github研究这个脚本，不过没什么技术含量，[Click Here](https://github.com/Jackjun724/HackPan)


### 最后敬告
仅供学习使用，不做非法用途，做良好公民！
